/*
 *  Image Zoom 1.0 - jQuery plugin
 *  written by Yosuke Fujii
 *  version 0.0.1
 *  modified 2014/1/28
 *
 *  Copyright (c) 2014 Yosuke Fujii
 *  Licensed under the MIT (MIT-LICENSE.txt)
 *
 *  Built for jQuery library
 *  http://jquery.com
 *
 */
;(function(a){a.fn.imageZoom=function(f){if(window.ontouchstart!==undefined){return false}var r,D=new Image(),b=false,h=true,e=false,k,z=0,s=0,q=0,o=0,B=0,x=0,v=0,u=0,j=0,g=0,d=0,c=0,p=0,n=0,y=false,t=0,l=0;f=a.extend({},a.fn.imageZoom.defaults,f);return this.each(function(){r=this;var E=r.tagName.toLowerCase();if(E=="img"){var F=a(r).offset();z=F.left;s=F.top;q=a(r).width();o=a(r).height();d=q*f.zoomRatio;c=o*f.zoomRatio;j=z+q+f.zoomAreaOffsetX;g=s+f.zoomAreaOffsetY;p=f.zoomAreaWidth?f.zoomAreaWidth:q;n=f.zoomAreaHeight?f.zoomAreaHeight:o;v=p/f.zoomRatio;u=n/f.zoomRatio;i(r);i("obj_lt: "+z+","+s+"  obj_xy: "+q+","+o+"  zoom_xy: "+d+","+c+"  curObj_xy: "+v+","+u);if(f.largeImageUrl){D.src=f.largeImageUrl}else{D.src=a(r).attr("src")}D.width=d;D.height=c;a(D).error(function(){h=false});D.onload=function(){b=true};a("body").off(".imageZoom");a("body").on("mousemove.imageZoom",function(G){w(G)})}else{i("Object tagname must be img.")}});function i(E){if(f.debugMode){console.log("jQuery imageZoom: "+E)}}function m(){y=false;e=false;a("#"+f.zoomAreaId).remove();a("#"+f.lensId).remove()}function A(E){if(!h){a("#"+f.zoomAreaId+" div").html(f.errorMessage)}else{if(b){a("#"+f.zoomAreaId).html("").append(D);clearTimeout(k)}else{k=setTimeout(function(F){A(F)},200)}}}function C(F){e=true;var E='<div id="'+f.zoomAreaId+'" style="position:absolute;overflow:hidden;border:1px solid '+f.zoomAreaBorderColor+";background-color:#fff;left:"+j+"px;top:"+g+"px;width:"+(p-2)+"px;height:"+(n-2)+"px;z-index:"+f.zoomAreaZindex+';"><div style="padding:45% 20%;text-align:center;font-size:'+(p/20)+'px;color:#777;font-weight:bold;">'+f.preloadMessage+"</div></div>";if(f.lens){E+='<div id="'+f.lensId+"\" style=\"position:absolute;overflow:hidden;content:'';cursor:move;filter:progid:DXImageTransform.Microsoft.Alpha(Opacity="+(f.lensOpacity*100)+");opacity:"+f.lensOpacity+";width:"+(v-2)+"px;height:"+(u-2)+"px;border:1px solid "+f.lensBorderColor+";background-color:"+f.lensColor+";z-index:"+f.lensZindex+';"></div>'}a(E).prependTo(f.parent);a(D).css({position:"absolute",top:"0",left:"0"});A()}function w(E){t=E?E.pageX-z:0;l=E?E.pageY-s:0;if(t<0||l<0||t>q||l>o){y=false;m()}else{y=true;if(!e){C()}fpl=(t-(v/2))<0?0:t-(v/2);fpt=(l-(u/2))<0?0:l-(u/2);fpl=fpl>(q-v)?q-v:fpl;fpt=fpt>(o-u)?o-u:fpt;zxl=fpl/q*d;zyt=fpt/o*c;a("#"+f.zoomAreaId+" img").css({left:zxl*(-1),top:zyt*(-1)});if(f.lens){a("#"+f.lensId).css({left:z+fpl,top:s+fpt})}i("fpl,fpt: "+fpl+","+fpt+"  zxl,zyt: "+zxl+","+zyt)}}};a.imageZoom={};a.imageZoom.destroy=function(){};a.fn.imageZoom.defaults={zoomAreaId:"imageZoom_zoomArea",zoomAreaWidth:false,zoomAreaHeight:false,zoomAreaZindex:100,zoomAreaOffsetX:10,zoomAreaOffsetY:0,zoomAreaBorderColor:"#ccc",lens:true,lensId:"imageZoom_lensArea",lensOpacity:0.3,lensZindex:200,lensColor:"#3695d7",lensBorderColor:"#000",parent:"body",preloadMessage:"Image Loading...",errorMessage:"Error while Loading Image.",largeImageUrl:false,zoomRatio:3,debugMode:false}})(jQuery);